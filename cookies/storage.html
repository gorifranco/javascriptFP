<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Galetes</title>
    <script src="galetes.js"></script>
    <script>

        //Exercici 4
        window.onload = () => {
            document.querySelector("input[type='submit']").addEventListener("click", guardar);
            document.querySelector("input[type='button']").addEventListener("click", borrarStorage);
            let inputs = document.querySelectorAll("input[type='text']")
            inputs[0].value = (localStorage.getItem("usuari") !== undefined) ? localStorage.getItem("usuari") : "";
            inputs[1].value = (localStorage.getItem("pass") !== undefined) ? localStorage.getItem("pass") : "";
            imprimirLocalStorage()
        }

        function guardar(event) {
            let inputs = document.querySelectorAll("input[type='text']")
            if (inputs[0].value !== "" && inputs[1].value !== "") {
                localStorage.setItem("usuari", inputs[0].value)
                localStorage.setItem("pass", inputs[1].value)
            } else {
                event.preventDefault()
            }
        }

        function borrarStorage() {
            localStorage.clear()
        }

        function imprimirLocalStorage() {
            for (let i = 0; i < localStorage.length; i++) {
                console.log(localStorage.key(i) + ": " + localStorage.getItem(localStorage.key(i)))
            }
        }
    </script>
</head>
<body>
<form>
    <label>Usuari
        <input type="text" required>
    </label>
    <label>Contrassenya
        <input type="text" required>
    </label>
    <input type="submit">
    <input type="button" value="borrarCookies">
    <div></div>
</form>
</body>
</html>